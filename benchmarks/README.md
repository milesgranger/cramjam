Benchmarks
---

*Dislcaimer: remember benchmarks are generally fraught with issues and their
legitimacy depends on a multitude of factors.*

I've used basic, but seemingly nice, [`pytest-benchmark`](https://pytest-benchmark.readthedocs.io/en/stable/usage.html)
to produce the following benchmarks on a fairly modern machine.

If you'd like to run these yourself, you'll need whatever according system 
dependency, if any, required by the specific algorithm as well as the Python
lib installed. Can install all via `pip install -r benchmark-requirements.txt`.

Note that some are faster, some are slower. Depending on your situation, this lib
may be a good trade-off. I make no _real_ attempt at speed, but a focus
on pure Rust implementations (or those that can be statically compiled), meaning no 
system libraries or third-party dependencies are required. 

The resulting output from benchmarks indicate what lib was used, (`cramjam` vs `gzip`) 
and the following number represents (about) how many MB was used in a round-trip iteration
during the benchmark. For example:

`test_gzip[cramjam-1]` indicates `cramjam` and 1MB was used during the gzip benchmark.

--- 

#### Gzip

`make bench-gzip`

```bash 
--------------------------------------------------------------------------------------- benchmark: 6 tests --------------------------------------------------------------------------------------
Name (time in ms)               Min                 Max                Mean             StdDev              Median                IQR            Outliers       OPS            Rounds  Iterations
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_gzip[cramjam-1]         4.3467 (1.0)        4.9494 (1.0)        4.4423 (1.0)       0.0833 (1.0)        4.4147 (1.0)       0.0710 (1.0)         26;15  225.1111 (1.0)         179           1
test_gzip[gzip-1]            7.9946 (1.84)      11.6538 (2.35)       8.7541 (1.97)      0.6237 (7.49)       8.6428 (1.96)      0.6360 (8.96)         31;5  114.2324 (0.51)        120           1
test_gzip[cramjam-10]       44.9814 (10.35)     50.3039 (10.16)     45.7286 (10.29)     1.2207 (14.66)     45.3096 (10.26)     0.8114 (11.43)         1;1   21.8682 (0.10)         18           1
test_gzip[gzip-10]          82.0343 (18.87)     86.7872 (17.53)     83.6660 (18.83)     1.6559 (19.89)     82.8103 (18.76)     2.5325 (35.69)         3;0   11.9523 (0.05)         12           1
test_gzip[cramjam-100]     546.2079 (125.66)   562.1310 (113.57)   554.0027 (124.71)    6.6722 (80.13)    551.0923 (124.83)   10.6431 (149.97)        2;0    1.8050 (0.01)          5           1
test_gzip[gzip-100]        886.4751 (203.94)   948.1273 (191.56)   909.5149 (204.74)   25.5782 (307.19)   908.3611 (205.76)   38.8905 (548.01)        1;0    1.0995 (0.00)          5           1
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
```

#### Snappy

`make bench-snappy`

```bash
----------------------------------------------------------------------------------------------------- benchmark: 6 tests ----------------------------------------------------------------------------------------------------
Name (time in us)                         Min                     Max                    Mean                StdDev                  Median                 IQR            Outliers         OPS            Rounds  Iterations
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_snappy_raw[snappy-1]            494.4660 (1.0)          653.9200 (1.0)          503.0247 (1.0)         14.4888 (1.0)          496.6165 (1.0)        3.7050 (1.0)       265;384  1,987.9739 (1.0)        1862           1
test_snappy_raw[cramjam-1]           794.4050 (1.61)       2,027.2320 (3.10)       1,260.1222 (2.51)       113.2127 (7.81)       1,222.9675 (2.46)     103.8910 (28.04)       94;53    793.5738 (0.40)        796           1
test_snappy_raw[snappy-10]         5,251.1770 (10.62)      7,255.8170 (11.10)      5,430.7303 (10.80)      250.0667 (17.26)      5,365.4540 (10.80)    123.4770 (33.33)       14;17    184.1373 (0.09)        190           1
test_snappy_raw[cramjam-10]        7,404.6830 (14.98)     12,739.4730 (19.48)      7,913.9786 (15.73)      747.0559 (51.56)      7,746.9320 (15.60)    258.1418 (69.67)         5;7    126.3587 (0.06)         69           1
test_snappy_raw[snappy-100]       87,991.8670 (177.95)    89,916.7030 (137.50)    88,693.3820 (176.32)     638.0725 (44.04)     88,574.8745 (178.36)   650.9975 (175.71)        3;2     11.2748 (0.01)         12           1
test_snappy_raw[cramjam-100]     138,267.2730 (279.63)   141,720.8140 (216.73)   139,295.9823 (276.92)   1,057.9672 (73.02)    139,120.8835 (280.14)   688.0510 (185.71)        1;1      7.1790 (0.00)          8           1
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
```

#### Lz4

`make bench-lz4`

```bash
--------------------------------------------------------------------------------------- benchmark: 6 tests --------------------------------------------------------------------------------------
Name (time in ms)                 Min                 Max                Mean            StdDev              Median               IQR            Outliers       OPS            Rounds  Iterations
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_lz4[cramjam-1]            2.2499 (1.0)        3.3305 (1.0)        2.3356 (1.0)      0.1162 (1.05)       2.3007 (1.0)      0.1039 (1.0)         34;17  428.1550 (1.0)         447           1
test_lz4[python-lz4-1]         2.4250 (1.08)       3.7200 (1.12)       2.4957 (1.07)     0.1108 (1.0)        2.4622 (1.07)     0.1051 (1.01)        29;12  400.6873 (0.94)        391           1
test_lz4[cramjam-10]          10.0083 (4.45)      19.6188 (5.89)      10.5178 (4.50)     1.5099 (13.62)     10.2067 (4.44)     0.2577 (2.48)          2;2   95.0770 (0.22)         43           1
test_lz4[python-lz4-10]       26.3227 (11.70)     28.2148 (8.47)      26.8020 (11.48)    0.4879 (4.40)      26.6014 (11.56)    0.4864 (4.68)          5;2   37.3107 (0.09)         32           1
test_lz4[cramjam-100]        180.7901 (80.36)    182.7235 (54.86)    181.7960 (77.84)    0.7742 (6.99)     181.8226 (79.03)    1.3456 (12.96)         2;0    5.5007 (0.01)          6           1
test_lz4[python-lz4-100]     338.0236 (150.24)   341.9271 (102.66)   340.4745 (145.78)   1.4592 (13.17)    340.7395 (148.10)   1.2389 (11.93)         1;1    2.9371 (0.01)          5           1
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
```

#### Brotli

`make bench-brotli`

```bash
------------------------------------------------------------------------------------------ benchmark: 6 tests ------------------------------------------------------------------------------------------
Name (time in ms)                  Min                   Max                  Mean             StdDev                Median                IQR            Outliers     OPS            Rounds  Iterations
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_brotli[brotli-1]         109.6123 (1.0)        128.4139 (1.0)        117.3476 (1.0)       6.0469 (6.45)       116.8914 (1.0)       9.0987 (5.24)          2;0  8.5217 (1.0)           9           1
test_brotli[cramjam-1]        142.7420 (1.30)       152.4250 (1.19)       145.7641 (1.24)      3.1478 (3.36)       145.2713 (1.24)      1.8672 (1.08)          1;1  6.8604 (0.81)          7           1
test_brotli[brotli-5]         502.7034 (4.59)       531.9119 (4.14)       514.0489 (4.38)     10.7839 (11.50)      511.5030 (4.38)      9.1365 (5.26)          2;1  1.9453 (0.23)          5           1
test_brotli[cramjam-5]        711.3392 (6.49)       738.9708 (5.75)       727.4237 (6.20)     10.4611 (11.15)      729.9179 (6.24)     13.3931 (7.71)          2;0  1.3747 (0.16)          5           1
test_brotli[brotli-10]        964.5113 (8.80)       966.5836 (7.53)       965.6345 (8.23)      0.9380 (1.0)        965.8290 (8.26)      1.7363 (1.0)           2;0  1.0356 (0.12)          5           1
test_brotli[cramjam-10]     1,405.5786 (12.82)    1,492.3061 (11.62)    1,440.4309 (12.27)    40.4699 (43.14)    1,418.5857 (12.14)    70.9391 (40.86)         1;0  0.6942 (0.08)          5           1
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
```




